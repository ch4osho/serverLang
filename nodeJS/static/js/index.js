"use strict";var ws=new WebSocket("ws://chaosho.com:443"),nickname="";function appendLog(n,e,s){if(void 0!==s){var a,o=document.getElementById("messages"),l=document.createElement("li");a="notification"===n?"<p>"+'<span class="label label-warning"><i class="glyphicon glyphicon-plus"></i></span>'+"&nbsp;&nbsp;"+s+"</p>":"nick_update"==n?"<p>"+'<span class="label label-warning"><i class="glyphicon glyphicon-bullhorn"></i></span>'+"&nbsp;&nbsp;"+s+"</p>":'<p class="user_msg">'+('<span class="label label-info">'+e+":</span>")+"&nbsp;&nbsp;"+s+"</p>",l.innerHTML=a,o.appendChild(l)}}function sendMessage(){var n=document.getElementById("message");ws.readyState===WebSocket.OPEN&&ws.send(n.value),n.value="",n.focus()}function changName(){var n=$("#name").val();ws.readyState===WebSocket.OPEN&&ws.send("/nick "+n)}ws.onopen=function(n){console.log("连接到聊天室啦~")},ws.onmessage=function(n){var e=JSON.parse(n.data);nickname=e.nickname,appendLog(e.type,e.nickname,e.message),console.log("ID: [%s] = %s",e.id,e.message),console.log("这是data",e)},ws.onclose=function(n){appendLog("Connection closed"),console.log("Connection closed")};