<!--index.wxml-->
<!-- <view class="container">
  <view class="userinfo">
    <button wx:if="{{!hasUserInfo && canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
    <block wx:else>
      <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
      <text class="userinfo-nickname">{{userInfo.nickName}}</text>
    </block>
  </view>
</view> -->
<view class="pb100 w90">
    <view class="header">
        <image alt="headerImage" class="header-image" src="https://web.xuexiyuansu.com/images/miniprogramimages/-1396342996_1582870292623.png" bindtap="navigateToIntro"></image>
    </view>
    <view class="parent-guide {{upward?'upward' : ''}}" bindtap="navigateToParentGuide" style="display: {{upward ? 'flex' : 'none'}}">
        <image src="https://web.xuexiyuansu.com/images/miniprogramimages/-1698726002_1582877096726.png" mode="widthFix"></image>
        <text>家长指引</text>
    </view>
    <view class="parent-guide {{!upward?'downward' : ''}}" bindtap="navigateToParentGuide" style="display: {{!upward ? 'flex' : 'none'}}">
        <image src="https://web.xuexiyuansu.com/images/miniprogramimages/-1698726002_1582877096726.png" mode="widthFix"></image>
    </view>
    <view class="course">
        <text>课程</text>
    </view>
    <view class="swiper-tab">
        <view class="swiper-tab-item {{currentTab == 0 ? 'active' : ''}}" data-current="0" bindtap="clickTab">热门推荐</view>
        <view class="swiper-tab-item {{currentTab == 1 ? 'active' : ''}}" data-current="1" bindtap="clickTab">小学课程</view>
        <view class="swiper-tab-item {{currentTab == 2 ? 'active' : ''}}" data-current="2" bindtap="clickTab">初中课程</view>
        <view class="swiper-tab-item {{currentTab == 3 ? 'active' : ''}}" data-current="3" bindtap="clickTab">高中课程</view>
    </view>
    <swiper current="{{currentTab}}" duration="300" bindchange="swiperTab" class="swiper" style="height: {{scrollViewHeight?scrollViewHeight+'px':'auto'}}">
        <swiper-item>
            <scroll-view scroll-y="true" style="height: {{scrollViewHeight?scrollViewHeight+'px':'auto'}}">
                <!-- <button bindtap="navigateToPurchaseSuccessful" class="pretender">跳转购课成功页</button>
                <button bindtap="navigateToConvertPage" data-c="wsc1" class="pretender">带参跳转转化页</button> -->
                <view wx:for="{{recommendCourseList}}" wx:for-item="item" wx:key="index" wx:for-index="idx">
                    <image src="{{item.picUrl}}" bindtap="navigateToConvertPage" data-c="{{item.channel}}" mode="widthFix"></image>
                </view>
            </scroll-view>
        </swiper-item>
        <swiper-item>
            <scroll-view scroll-y="true" style="height: {{scrollViewHeight?scrollViewHeight+'px':'auto'}}">
                <view wx:for="{{primaryCourseList}}" wx:for-item="item" wx:key="index" wx:for-index="idx">
                    <image src="{{item.picUrl}}" bindtap="navigateToConvertPage" data-c="{{item.channel}}" mode="widthFix"></image>
                </view>
            </scroll-view>
        </swiper-item>
        <swiper-item>
            <scroll-view scroll-y="true" style="height: {{scrollViewHeight?scrollViewHeight+'px':'auto'}}">
                <view wx:for="{{middleCourseList}}" wx:for-item="item" wx:key="index" wx:for-index="idx">
                    <image src="{{item.picUrl}}" bindtap="navigateToConvertPage" data-c="{{item.channel}}" mode="widthFix"></image>
                </view>
            </scroll-view>
        </swiper-item>
        <swiper-item>
            <scroll-view scroll-y="true" style="height: {{scrollViewHeight?scrollViewHeight+'px':'auto'}}">
                <view wx:for="{{highCourseList}}" wx:for-item="item" wx:key="index" wx:for-index="idx">
                    <image src="{{item.picUrl}}" bindtap="navigateToConvertPage" data-c="{{item.channel}}" mode="widthFix"></image>
                </view>
            </scroll-view>
        </swiper-item>
    </swiper>
</view>
<!-- 底栏 -->
<view class="bottom-bar">
    <image src="https://web.xuexiyuansu.com/images/miniprogramimages/342478139_1582877844854.png" mode="aspectFit"></image>
    <button bindtap="showDownloadModal">立即下载</button>
</view>
<!-- 自定义模态窗口 -->
<view class="modal" catchtouchmove="preventTouchMove" wx:if="{{showModal}}"></view>
<view class="modal-dialog" wx:if="{{showModal}}">
    <view class="image">
        <image src="https://web.xuexiyuansu.com/images/miniprogramimages/787070_1582883273587.png" mode="widthFix" open-type="contact"></image>
    </view>
    <button open-type="contact" class="open-contact">立即下载：回复 1</button>
    <view class="close-tag">
        <image src="https://web.xuexiyuansu.com/images/miniprogramimages/2099713199_1582880945771.png" mode="widthFix" bindtap="hideModal"></image>
    </view>
</view>